# 프로젝트 마스터 플랜

## 1. 비전 및 미션
- **비전**: 기업 고객이 단일 웹 콘솔에서 모바일 쿠폰을 발행·발송·모니터링할 수 있는 안정적이고 추적 가능한 마케팅 플랫폼을 구축한다.
- **미션**: COUFUN 공급사 API와 LG유플러스 SNAP Agent를 연동하여 예약 발송, 대량 발송, CS 처리까지 아우르는 엔드투엔드 백오피스와 운영 체계를 제공한다.

## 2. 핵심 목표
1. **신뢰성**: 공급사 API·SNAP Agent와의 연동을 자동화하고 예외 상황(재고 부족, 발송 실패 등)에 대한 재처리 시나리오를 마련한다.
2. **보안**: 개인정보(이름·이메일·휴대폰)와 쿠폰번호를 암호화 저장하고, 접근 감사 로깅을 표준화한다.
3. **운영 편의성**: 발송등록, 발송조회, CS의 세 화면이 서로의 데이터를 재사용하며, 엑셀 업로드·다운로드와 통계용 지표를 지원한다.
4. **확장성**: 예약 발송 최대 20,000건 처리를 고려한 비동기 워커, 스케줄러 설계를 도입하고, 향후 API/채널 확장에 대비한다.

## 3. 범위 정의
- **포함**
  - 로그인/권한 관리, 캠페인 생성 및 예약 발송, 쿠폰 발급/상태 조회, MMS 이미지 생성 및 전송, 발송 결과·CS 처리, 감사/운영 로그.
  - 로컬 Docker 기반 개발 환경과 카페24 VPS 배포 절차 수립.
- **제외**
  - 오프라인 쿠폰 교환/정산 로직, 고객사 청구/빌링 시스템 연동, 다국어 UI.

## 4. 성공 기준
- 발송등록 화면에서 설정한 예약 정보가 예약 시각 ±5분 내에 공급사 쿠폰 발급과 SNAP Agent 큐 적재까지 완료된다.
- 발송조회·CS 화면에서 쿠폰 상태(사용, 취소, 유효기간 등)를 실시간(최대 5분 지연)으로 확인할 수 있다.
- 개인정보 암호화와 접근 로그 정책을 통해 내부 보안 점검을 통과한다.
- Docker Compose 로컬 환경에서 모든 단위/통합 테스트를 수행하고, 카페24 VPS로 무중단 배포 절차를 문서화한다.

## 5. 제약 및 가정
- 공급사 API는 최대 10건/호 호출 제한을 가지며, 예약 발송 시 워커가 배치로 반복 호출해야 한다. (`MyDocuments/01_쿠폰공급사API` 참고)
- SNAP Agent는 `UMS_MSG` 기준으로 MMS 발송을 수행하며, `CLIENT_KEY`는 30바이트 이하이어야 한다. (`MyDocuments/02_LG유플러스` 참고)
- 우리 시스템의 공통 키는 `YYYYMMDDHHMISSinnobeatXXXXXXXX` 형식(30바이트)을 사용하고, 공급사/통신사 연동 시 동일 키를 전달한다.
- MariaDB 10.x, Python 3.11 환경을 기본으로 하며, Docker 기반 로컬 환경을 표준으로 삼는다.

## 6. 로드맵 개요
1. **준비 단계**: 개발 문서 정비, Docker 환경 구축, 기본 인증/권한 모듈 개발.
2. **발송등록 스프린트**: 상품 동기화, 캠페인 생성, 수신자 업로드, 쿠폰 발급 워커, SNAP Agent 연동.
3. **발송조회 스프린트**: 발송 이력 페이징 API, 상세 모달, 취소 처리, 리포트 다운로드.
4. **CS 스프린트**: 쿠폰 상태 조회/갱신, 재발송·번호 변경, 상태 이력 관리 UI/백엔드.
5. **운영 고도화**: 감사 로그, 모니터링 대시보드, 알림, 배포 자동화.

## 7. 이해관계자 역할
| 역할 | 책임 | 산출물 |
| --- | --- | --- |
| 제품 담당자 | 요구사항 우선순위, 문서 승인 | 마스터 플랜, 기능 명세 승인 |
| 백엔드 개발 | API/워커/DB 설계 및 구현 | API 문서, 코드, 테스트 리포트 |
| 프런트엔드 개발 | HTML/JS 연동, UI 개선 | 화면 연동 코드, 스타일 가이드 |
| 운영/보안 | 계정 관리, 로그 모니터링, 배포 | 운영 가이드, 보안 점검 체크리스트 |

## 8. 변경 관리 원칙
- 모든 요구 변경은 Git 이슈와 문서 업데이트(기능 명세, 데이터 모델 등)를 동반해야 한다.
- 문서와 구현이 불일치할 경우 문서 우선으로 판단하며, 변경 확정 후 PR에 반영한다.
- 공급사/LG유플러스 사양 변경이 있을 때는 마스터 플랜과 관련 문서를 동시 업데이트한다.